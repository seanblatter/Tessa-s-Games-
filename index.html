<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tessa's Games</title>
    <link rel="stylesheet" href="styles.v2.css">
</head>
<body>
    <div id="app">
        <!-- Landing Page -->
        <div id="landing-screen" class="screen active">
            <div class="header">
                <h1>üíù Tessa's Games üíù</h1>
                <p class="subtitle">Play, compete, and celebrate every win.</p>
            </div>
            <div class="landing-content">
                <div class="landing-card">
                    <h2>Daily puzzles made for you</h2>
                    <p>Jump into Wordle, Sudoku, and Crossword challenges designed for fun, focus, and friendly competition.</p>
                </div>
                <div class="landing-card">
                    <h2>Track your streaks</h2>
                    <p>We save scores by game and day so you can see your progress, climb the leaderboard, and celebrate wins.</p>
                </div>
                <div class="landing-card">
                    <h2>Play with friends</h2>
                    <p>Invite friends, build your crew, and compare scores on private friend-only leaderboards.</p>
                </div>
                <div class="landing-actions">
                    <button class="primary-button" onclick="showAuth('signup')">Create Account</button>
                    <button class="secondary-button" onclick="showAuth('signin')">Sign In</button>
                </div>
            </div>
        </div>

        <!-- Auth Screen -->
        <div id="auth-screen" class="screen">
            <div class="auth-card">
                <h2 id="auth-title">Welcome back</h2>
                <p id="auth-subtitle">Sign in to continue playing.</p>
                <div class="auth-tabs">
                    <button class="auth-tab" id="signin-tab" onclick="setAuthMode('signin')">Sign In</button>
                    <button class="auth-tab" id="signup-tab" onclick="setAuthMode('signup')">Sign Up</button>
                </div>
                <form id="auth-form">
                    <label class="form-field">
                        <span>Email</span>
                        <input type="email" id="auth-email" required placeholder="you@example.com">
                    </label>
                    <label class="form-field">
                        <span>Password</span>
                        <input type="password" id="auth-password" required minlength="6" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </label>
                    <label class="form-field" id="auth-name-field">
                        <span>Display name</span>
                        <input type="text" id="auth-name" placeholder="Tessa">
                    </label>
                    <button type="submit" class="primary-button" id="auth-submit">Sign In</button>
                </form>
                <div class="auth-divider"><span>or</span></div>
                <button class="google-button" id="google-signin">Continue with Google</button>
                <p class="auth-message" id="auth-message"></p>
                <button class="text-button" onclick="showLanding()">Back to home</button>
            </div>
        </div>

        <!-- Main Menu -->
        <div id="menu-screen" class="screen">
            <div class="menu-top-bar">
                <div class="menu-user">
                    <span class="menu-greeting">Hi,</span>
                    <span class="menu-user-name" id="menu-user-name">Player</span>
                </div>
                <div class="menu-actions">
                    <button class="icon-button" id="menu-dropdown-toggle" aria-haspopup="true" aria-expanded="false" aria-label="Open menu">
                        <span class="menu-icon" aria-hidden="true">
                            <span></span>
                            <span></span>
                            <span></span>
                        </span>
                    </button>
                    <div class="menu-dropdown" id="menu-dropdown" aria-label="Profile menu">
                        <div class="dropdown-section">
                            <h4>Today's scores</h4>
                            <div class="dropdown-scores" id="dropdown-scores"></div>
                        </div>
                        <button class="dropdown-item" onclick="showProfile()">Profile</button>
                        <button class="dropdown-item" onclick="showTopScores()">Top Scores</button>
                        <button class="dropdown-item" onclick="showConnect()">Connect</button>
                        <button class="dropdown-item" onclick="signOutUser()">Logout</button>
                    </div>
                </div>
            </div>
            <div class="header">
                <h1>üíù Tessa's Games üíù</h1>
                <p class="subtitle">Choose your game</p>
            </div>
            <div class="menu-buttons">
                <button class="game-button" onclick="showGame('wordle')">
                    <span class="game-icon">üìù</span>
                    <span class="game-name">Wordle</span>
                    <span class="game-desc">Guess the special word</span>
                </button>
                <button class="game-button" onclick="showGame('sudoku')">
                    <span class="game-icon">üî¢</span>
                    <span class="game-name">Sudoku</span>
                    <span class="game-desc">Classic number puzzle</span>
                </button>
                <button class="game-button" onclick="showGame('crossword')">
                    <span class="game-icon">üî§</span>
                    <span class="game-name">Crossword</span>
                    <span class="game-desc">Custom word puzzles</span>
                </button>
            </div>
        </div>

        <!-- Profile Screen -->
        <div id="profile-screen" class="screen">
            <div class="game-header">
                <button class="back-button" onclick="showMenu()">‚Üê Back</button>
                <h2>Profile</h2>
                <div></div>
            </div>
            <div class="panel" id="profile-details"></div>
        </div>

        <!-- Top Scores Screen -->
        <div id="scores-screen" class="screen">
            <div class="game-header">
                <button class="back-button" onclick="showMenu()">‚Üê Back</button>
                <h2>Top Scores</h2>
                <div></div>
            </div>
            <div class="panel">
                <label class="form-field">
                    <span>Game</span>
                    <select id="scores-game-select">
                        <option value="wordle">Wordle</option>
                        <option value="sudoku">Sudoku</option>
                        <option value="crossword">Crossword</option>
                    </select>
                </label>
                <div class="scores-toggle" role="group" aria-label="Score range">
                    <button class="toggle-button active" data-mode="daily" type="button">Daily</button>
                    <button class="toggle-button" data-mode="all" type="button">All Time</button>
                </div>
            </div>
            <div class="score-columns">
                <div class="panel">
                    <h3>Global Leaderboard</h3>
                    <ol id="global-leaderboard" class="leaderboard"></ol>
                </div>
                <div class="panel">
                    <h3>Friends Leaderboard</h3>
                    <ol id="friends-leaderboard" class="leaderboard"></ol>
                </div>
            </div>
        </div>

        <!-- Connect Screen -->
        <div id="connect-screen" class="screen">
            <div class="game-header">
                <button class="back-button" onclick="showMenu()">‚Üê Back</button>
                <h2>Connect</h2>
                <div></div>
            </div>
            <div class="panel">
                <h3>Your friend tag</h3>
                <p>Share this tag to invite friends.</p>
                <div class="invite-row">
                    <input type="text" id="friend-tag" readonly>
                    <button class="secondary-button" onclick="copyFriendTag()">Copy</button>
                </div>
            </div>
            <div class="panel">
                <h3>Invite friends</h3>
                <p>Share your invite link so friends can join your leaderboard.</p>
                <div class="invite-row">
                    <input type="text" id="invite-link" readonly>
                    <button class="secondary-button" onclick="copyInviteLink()">Copy</button>
                </div>
            </div>
            <div class="panel">
                <h3>Accept an invite</h3>
                <p>Paste a friend tag to connect with them.</p>
                <div class="invite-row">
                    <input type="text" id="invite-code" placeholder="ü•¨123456789">
                    <button class="primary-button" onclick="acceptInvite()">Send Request</button>
                </div>
                <p class="auth-message" id="connect-message"></p>
            </div>
            <div class="panel">
                <h3>Friend requests</h3>
                <div id="friend-requests" class="request-list"></div>
            </div>
        </div>

        <!-- Wordle Game -->
        <div id="wordle-screen" class="screen">
            <div class="game-header">
                <button class="back-button" onclick="showMenu()">‚Üê Back</button>
                <h2>Wordle</h2>
                <button class="new-game-button" data-game="wordle" onclick="newWordleGame()">New Game</button>
            </div>
            <div id="wordle-game">
                <div id="wordle-board"></div>
                <div id="wordle-keyboard"></div>
                <div id="wordle-message" class="message"></div>
            </div>
        </div>

        <!-- Sudoku Game -->
        <div id="sudoku-screen" class="screen">
            <div class="game-header">
                <button class="back-button" onclick="showMenu()">‚Üê Back</button>
                <h2>Sudoku</h2>
                <button class="new-game-button" data-game="sudoku" onclick="newSudokuGame()">New Game</button>
            </div>
            <div id="sudoku-game">
                <div class="sudoku-settings">
                    <label class="toggle-row">
                        <input type="checkbox" id="sudoku-autocheck" checked>
                        <span>Auto-check</span>
                    </label>
                </div>
                <div id="sudoku-board"></div>
                <div id="sudoku-controls">
                    <div id="number-pad"></div>
                    <button class="control-button" onclick="clearSudokuCell()">Clear</button>
                </div>
                <div id="sudoku-message" class="message"></div>
            </div>
        </div>

        <!-- Crossword Game -->
        <div id="crossword-screen" class="screen">
            <div class="game-header">
                <button class="back-button" onclick="showMenu()">‚Üê Back</button>
                <h2>Crossword</h2>
                <button class="new-game-button" data-game="crossword" onclick="newCrosswordGame()">New Game</button>
            </div>
            <div id="crossword-game">
                <div id="crossword-board"></div>
                <div id="crossword-clues">
                    <div class="clues-section">
                        <h3>Across</h3>
                        <div id="across-clues"></div>
                    </div>
                    <div class="clues-section">
                        <h3>Down</h3>
                        <div id="down-clues"></div>
                    </div>
                </div>
                <div id="crossword-message" class="message"></div>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="wordle.js"></script>
    <script src="sudoku.js"></script>
    <script src="crossword.js"></script>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-analytics.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        GoogleAuthProvider,
        signInWithPopup,
        signInWithRedirect,
        getRedirectResult,
        signOut,
        onAuthStateChanged,
                updateProfile,
                updateEmail
      } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
      import {
        getFirestore,
        collection,
        doc,
        getDoc,
        getDocs,
        query,
        setDoc,
        deleteDoc,
        serverTimestamp,
        where,
        orderBy,
        limit
      } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyAOWp_TXYvbwKouGFcSx_gbRvUVYMZqyBU",
        authDomain: "tessa-s-games.firebaseapp.com",
        projectId: "tessa-s-games",
        storageBucket: "tessa-s-games.firebasestorage.app",
        messagingSenderId: "69785654149",
        appId: "1:69785654149:web:3f089316c5df2830feaaec",
        measurementId: "G-H8TFWYLSHP"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const auth = getAuth(app);
      const db = getFirestore(app);
      const provider = new GoogleAuthProvider();

      window.firebaseServices = {
        app,
        analytics,
        auth,
        db,
        provider,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        signInWithPopup,
        signInWithRedirect,
        getRedirectResult,
        signOut,
        onAuthStateChanged,
        updateProfile,
        updateEmail,
        collection,
        doc,
        getDoc,
        getDocs,
        query,
        setDoc,
        deleteDoc,
        serverTimestamp,
        where,
        orderBy,
        limit
      };

      window.dispatchEvent(new Event('firebase-ready'));
    </script>
    <script src="app.js"></script>
</body>
</html>
